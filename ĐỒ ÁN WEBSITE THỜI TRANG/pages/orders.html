<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Admin Panel — Đơn hàng</title>
  <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/admin.css">
  <link rel="stylesheet" href="../css/orders.css">
</head>
<body>
  <div class="wrap">
    <!-- Sidebar (giữ nguyên như products.html, chỉ đổi active) -->
    <aside class="sidebar">
      <div class="brand"><span class="dot"></span><span class="txt">Fashion Admin</span></div>
      <nav class="menu">
        <a href="dashboard.html">
          <span class="ico">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="3" width="7" height="7" rx="1.5"/><rect x="14" y="3" width="7" height="7" rx="1.5"/>
              <rect x="3" y="14" width="7" height="7" rx="1.5"/><rect x="14" y="14" width="7" height="7" rx="1.5"/>
            </svg>
          </span><span class="txt">Tổng quan</span>
        </a>

        <a href="users.html">
          <span class="ico">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
              <path d="M16 21v-2a4 4 0 0 0-4-4H7a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="3"/>
              <path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a3 3 0 0 1 0 5.74"/>
            </svg>
          </span><span class="txt">Người dùng</span>
        </a>

        <a href="categories.html">
          <span class="ico">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20.59 13.41 11 3H4v7l9.59 9.59a2 2 0 0 0 2.82 0l4.18-4.18a2 2 0 0 0 0-2.82z"/><circle cx="7.5" cy="7.5" r="1.5"/>
            </svg>
          </span><span class="txt">Loại sản phẩm</span>
        </a>

        <a href="receipts.html">
          <span class="ico">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 3v14"/><path d="M19 10l-7 7-7-7"/>
            </svg>
          </span><span class="txt">Nhập kho</span>
        </a>

        <a href="pricelist.html">
          <span class="ico">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 1v22"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7H14a3.5 3.5 0 0 1 0 7H6"/>
            </svg>
          </span><span class="txt">Bảng giá</span>
        </a>

        <!-- ĐƠN HÀNG: trang hiện tại => active -->
        <a href="orders.html" class="active">
          <span class="ico">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
              <path d="M4 2h14a2 2 0 0 1 2 2v16l-3-2-3 2-3-2-3 2-3-2-1 0V4a2 2 0 0 1 2-2z"/>
              <path d="M8 7h8M8 11h8M8 15h5"/>
            </svg>
          </span><span class="txt">Đơn hàng</span>
        </a>

        <a href="inventory.html">
          <span class="ico">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 16V8a2 2 0 0 0-1-1.73L13 2.27a2 2 0 0 0-2 0L4 6.27A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4a2 2 0 0 0 1-1.73z"/>
              <path d="M3.3 7L12 12l8.7-5"/><path d="M12 22V12"/>
            </svg>
          </span><span class="txt">Tồn kho</span>
        </a>

        <a href="products.html">
          <span class="ico">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
              <path d="M6 7l1-3h10l1 3"></path>
              <path d="M6 7h12l-1 13H7L6 7z"></path>
              <path d="M9 10a3 3 0 0 0 6 0"></path>
            </svg>
          </span><span class="txt">Sản phẩm</span>
        </a>
      </nav>

      <div class="sidebar-footer">Fashion Admin • v1.0</div>
    </aside>

    <main>
    <div class="topbar">
      <div class="title">Đơn hàng</div>
      <div class="top-actions">
        <div class="avatar">
          <img data-admin-avatar src="https://i.pravatar.cc/100?img=13" alt="Nguyễn Admin">
        </div>
        <div class="account">
          <div class="name" data-admin-name>Nguyễn Admin</div>
          <div class="role">Quản trị viên</div>
        </div>
        <button class="btn-logout" data-admin-logout title="Đăng xuất">Đăng xuất</button>
      </div>
    </div>

      <div class="container grid">
        <!-- BỘ LỌC: theo khoảng thời gian & trạng thái (theo yêu cầu) -->
        <!-- BỘ LỌC -->
        <div class="card orders-filter">
        <div class="field">
            <label for="fromDate">Từ ngày</label>
            <input id="fromDate" type="date">
        </div>

        <div class="field">
            <label for="toDate">Đến ngày</label>
            <input id="toDate" type="date">
        </div>

        <div class="field">
            <label for="status">Trạng thái</label>
            <select id="status">
            <option value="">Tất cả</option>
            <option value="NEW">Mới đặt</option>
            <option value="PROCESSED">Đã xử lý</option>
            <option value="DELIVERED">Đã giao</option>
            <option value="CANCELLED">Hủy</option>
            </select>
        </div>

        <div class="field">
            <label for="q">Tìm theo mã đơn</label>
            <input id="q" type="text" placeholder="VD: OD-2025...">
        </div>

        <div class="btns">
            <button class="btn btn-ghost" id="reset">Đặt lại</button>
            <button class="btn btn-primary" id="apply">Lọc</button>
        </div>
        </div>


        <!-- BẢNG ĐƠN HÀNG -->
        <div class="card">
          <h3 style="margin:0 0 8px">Tất cả đơn hàng</h3>
          <table id="ordersTable">
            <thead>
              <tr>
                <th>Mã đơn</th>
                <th>Ngày đặt</th>
                <th>Khách hàng</th>
                <th class="num">Sản phẩm</th>
                <th class="num">Tổng tiền</th>
                <th>Trạng thái</th>
                <th style="width:260px">Thao tác</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
          <div id="pager" class="pager"></div>
        </div>
      </div>
    </main>
  </div>

  <!-- Modal chi tiết -->
  <div id="orderModal" class="modal">
    <div class="modal-backdrop" data-close></div>
    <div class="modal-dialog">
      <h3>Chi tiết đơn hàng</h3>
      <div id="orderDetail" class="order-detail"></div>
      <div class="modal-actions">
        <button class="btn btn-ghost" data-close>Đóng</button>
        <button class="btn btn-primary" id="saveStatus" title="Demo local">Lưu trạng thái</button>
      </div>
    </div>
  </div>

 <!-- DỮ LIỆU ĐƠN HÀNG NHÚNG TRỰC TIẾP -->
  <script id="orders-data" type="application/json">
  [
    {
      "code": "OD-20251103-0001",
      "createdAt": "2025-11-03T09:15:00+07:00",
      "status": "NEW",
      "customer": {
        "name": "Nguyễn Minh Anh",
        "phone": "0901234567",
        "email": "minhanh@example.com",
        "address": "12 Hoa Lan, Q.Phú Nhuận, TP.HCM"
      },
      "items": [
        {
          "id": 1,
          "name": "Áo sơ mi linen trắng",
          "size": "M",
          "color": "Trắng",
          "qty": 1,
          "price": 259000,
          "img": "../assets/orders/1.jpeg"
        },
        {
          "id": 2,
          "name": "Quần short kaki be",
          "size": "M",
          "color": "Be",
          "qty": 2,
          "price": 199000,
          "img": "../assets/orders/2.jpeg"
        }
      ],
      "payment": {
        "method": "COD",
        "shippingFee": 20000,
        "discount": 0
      },
      "processedBy": null,
      "note": "Giao trong giờ hành chính"
    },

    {
      "code": "OD-20251102-0004",
      "createdAt": "2025-11-02T14:40:00+07:00",
      "status": "PROCESSED",
      "customer": {
        "name": "Trần Quốc Bảo",
        "phone": "0919988776",
        "email": "quocbao@example.com",
        "address": "145 Cách Mạng Tháng 8, Q.3, TP.HCM"
      },
      "items": [
        {
          "id": 3,
          "name": "Váy hoa cổ vuông",
          "size": "S",
          "color": "Hồng",
          "qty": 1,
          "price": 459000,
          "img": "../assets/orders/3.jpg"
        }
      ],
      "payment": {
        "method": "Chuyển khoản",
        "shippingFee": 25000,
        "discount": 15000
      },
      "processedBy": "Lê Văn Dũng",
      "note": "Đặt hộ cho bạn gái"
    },

    {
      "code": "OD-20251030-0009",
      "createdAt": "2025-10-30T10:22:00+07:00",
      "status": "DELIVERED",
      "customer": {
        "name": "Lê Thu Hà",
        "phone": "0912345678",
        "email": "thuha@example.com",
        "address": "KDC An Phú, TP. Thủ Đức, TP.HCM"
      },
      "items": [
        {
          "id": 4,
          "name": "Áo khoác dù basic",
          "size": "L",
          "color": "Đen",
          "qty": 1,
          "price": 389000,
          "img": "../assets/orders/4.jpg"
        },
        {
          "id": 5,
          "name": "Nón lưỡi trai Classic",
          "size": "-",
          "color": "Đen",
          "qty": 1,
          "price": 99000,
          "img": "../assets/orders/5.jpg"
        }
      ],
      "payment": {
        "method": "COD",
        "shippingFee": 20000,
        "discount": 0
      },
      "processedBy": "Nguyễn Hữu Phát",
      "note": ""
    },

    {
      "code": "OD-20251028-0006",
      "createdAt": "2025-10-28T16:35:00+07:00",
      "status": "CANCELLED",
      "customer": {
        "name": "Phạm Thu Hà",
        "phone": "0938123123",
        "email": "thuhapham@example.com",
        "address": "89 Lê Lợi, Q. Hải Châu, Đà Nẵng"
      },
      "items": [
        {
          "id": 6,
          "name": "Chân váy ngắn jean",
          "size": "M",
          "color": "Xanh nhạt",
          "qty": 1,
          "price": 279000,
          "img": "../assets/orders/6.jpeg"
        }
      ],
      "payment": {
        "method": "COD",
        "shippingFee": 0,
        "discount": 0
      },
      "processedBy": "Trần Ngọc Yến",
      "note": "Khách hủy do đặt nhầm size"
    },

    {
      "code": "OD-20251025-0012",
      "createdAt": "2025-10-25T09:10:00+07:00",
      "status": "PROCESSED",
      "customer": {
        "name": "Đặng Thế Hiển",
        "phone": "0977666555",
        "email": "hien@example.com",
        "address": "25 Nguyễn Thị Minh Khai, Q.1, TP.HCM"
      },
      "items": [
        {
          "id": 7,
          "name": "Áo thun unisex logo nhỏ",
          "size": "L",
          "color": "Xám",
          "qty": 2,
          "price": 199000,
          "img": "../assets/orders/1.jpeg"
        },
        {
          "id": 8,
          "name": "Quần jogger thể thao",
          "size": "L",
          "color": "Đen",
          "qty": 1,
          "price": 299000,
          "img": "../assets/orders/2.jpeg"
        }
      ],
      "payment": {
        "method": "Chuyển khoản",
        "shippingFee": 25000,
        "discount": 50000
      },
      "processedBy": "Nguyễn Hữu Phát",
      "note": "Giao trong tuần"
    },

    {
      "code": "OD-20251021-0004",
      "createdAt": "2025-10-21T18:25:00+07:00",
      "status": "DELIVERED",
      "customer": {
        "name": "Võ Bảo Châu",
        "phone": "0902233445",
        "email": "baochau@example.com",
        "address": "123 Nguyễn Văn Cừ, Q.5, TP.HCM"
      },
      "items": [
        {
          "id": 9,
          "name": "Áo hoodie nỉ oversize",
          "size": "XL",
          "color": "Be",
          "qty": 1,
          "price": 459000,
          "img": "../assets/orders/3.jpg"
        }
      ],
      "payment": {
        "method": "COD",
        "shippingFee": 20000,
        "discount": 0
      },
      "processedBy": "Lê Văn Dũng",
      "note": "Giao hàng nhanh"
    }
  ]
  </script>

  <script src="../js/orders.js" defer></script>
</body>

<script src="../js/admin-session.js" defer></script>
</html>
