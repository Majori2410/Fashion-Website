<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap&subset=vietnamese" rel="stylesheet">
  <title>Fashion Shop — Trang chủ</title>

  <!-- Base site styles -->
    <link rel="stylesheet" href="../css/site.css">
  <!-- Home-only styles -->
   <link rel="stylesheet" href="../css/home.css">
</head>
<body>
  <!-- Header -->
  <header class="site-header">
    <div class="container header-inner">
      <a class="brand" href="./index.html">Fashion<span>Shop</span></a>
      <nav class="main-nav" aria-label="Chính">
        <a href="./index.html" class="active" aria-current="page">Trang chủ</a>
        <!-- Danh mục: hiện bạn bỏ, để # tạm (sẽ trỏ về category sau) -->
        <div class="nav-dd">
          <button class="dd-trigger" type="button" aria-haspopup="true" aria-expanded="false">
            Danh mục ▾
          </button>
          <ul class="dd-menu" role="menu" aria-label="Danh mục">
            <li><a role="menuitem" href="./user-category.html?category=Trang%20phục%20Xuân%20Hè">Trang phục Xuân Hè</a></li>
            <li><a role="menuitem" href="./user-category.html?category=Trang%20phục%20Thu%20Đông">Trang phục Thu Đông</a></li>
            <li><a role="menuitem" href="./user-category.html?category=Giày%20dép">Giày dép</a></li>
            <li><a role="menuitem" href="./user-category.html?category=Phụ%20kiện">Phụ kiện</a></li>
          </ul>
        </div>
        <a href="./user-category.html" class="all-products-link">Tất cả sản phẩm</a>
        <a href="./user-orders.html" class="orders-link">Đơn hàng</a>
        <button type="button" class="icon-btn" id="openSearch">Tìm kiếm</button>
        <a href="./cart.html">Giỏ hàng</a>
      </nav>
      <a href="./login.html" class="actions account-login">
        <span class="avatar anon" aria-hidden="true"></span>
        <span class="account-text">Đăng nhập</span>
      </a>
    </div>
  </header>

    <!-- Search Popover -->
  <div id="searchOverlay" class="search-overlay" hidden></div>

  <div id="searchModal" class="search-modal" hidden role="dialog" aria-labelledby="searchTitle">
    <form id="searchForm" class="search-form" autocomplete="off">
      <h3 id="searchTitle" class="search-title">Bạn cần gì?</h3>

      <!-- Tìm kiếm cơ bản theo Tên -->
      <label class="sr-only" for="sName">Tên sản phẩm</label>
      <input id="sName" type="text" placeholder="Nhập tên sản phẩm..." aria-label="Tìm theo tên sản phẩm" />

      <!-- Tìm kiếm nâng cao (kết hợp Loại + Khoảng giá) -->
      <!-- Loại sản phẩm: radio tròn + chữ (1 hàng) -->
      <div class="row cat-row">
        <span class="blocklabel">Loại sản phẩm</span>
        <div class="cat-radios" role="radiogroup" aria-label="Loại sản phẩm">
          <label class="radio">
            <input type="radio" name="cat" value="" checked>
            <span class="dot"></span><span class="text">Tất cả</span>
          </label>
          <label class="radio">
            <input type="radio" name="cat" value="Trang phục Xuân Hè">
            <span class="dot"></span><span class="text">Trang phục Xuân Hè</span>
          </label>
          <label class="radio">
            <input type="radio" name="cat" value="Trang phục Thu Đông">
            <span class="dot"></span><span class="text">Trang phục Thu Đông</span>
          </label>
          <label class="radio">
            <input type="radio" name="cat" value="Giày dép">
            <span class="dot"></span><span class="text">Giày dép</span>
          </label>
          <label class="radio">
            <input type="radio" name="cat" value="Phụ kiện">
            <span class="dot"></span><span class="text">Phụ kiện</span>
          </label>
        </div>
        <!-- lưu giá trị đã chọn để submit -->
        <input type="hidden" id="sCategory" value="">
      </div>

      <!-- Khoảng giá: nằm ngay dòng dưới -->
      <div class="row price-row">
        <span class="blocklabel">Khoảng giá (VNĐ)</span>
        <div class="range">
          <input id="sMin" type="number" min="0" step="50000" placeholder="Tối thiểu" aria-label="Giá tối thiểu" />
          <span>—</span>
          <input id="sMax" type="number" min="0" step="50000" placeholder="Tối đa" aria-label="Giá tối đa" />
        </div>
      </div>


      <div class="search-actions">
        <button type="button" class="btn-ghost" id="closeSearch">Đóng</button>
        <button type="submit" class="btn btn-primary">Tìm kiếm</button>
      </div>
    </form>
  </div>

  <main>
    <!-- HERO -->
    <section class="hero">
      <div class="container hero-inner">
        <div class="hero-copy">
          <h1>New Season, New You</h1>
          <p>Phong cách tối giản – chất liệu thoải mái. Khám phá bộ sưu tập mới cho mọi khoảnh khắc.</p>
          <div class="hero-actions">
            <a class="btn" href="./register.html">Đăng ký</a>
            <a class="btn btn-ghost" href="./login.html">Đăng nhập</a>
          </div>
        </div>
        <div class="hero-visual">
          <img src="https://picsum.photos/seed/hero-fashion/900/700" alt="Bộ sưu tập thời trang mới">
        </div>
      </div>
    </section>

    <!-- FEATURED CATEGORIES (tile) -->
    <section class="container section">
      <header class="section-head">
        <h2>Bộ sưu tập nổi bật</h2>
      </header>

        <div class="tiles">
        <!-- Trang phục Xuân Hè -->
        <a class="tile" href="./user-category.html?category=Trang%20phục%20Xuân%20Hè">
          <img src="../assets/images/1.png"
              alt="Trang phục Xuân Hè - phong cách nhẹ nhàng, hoa tulip tươi sáng">
          <div class="tile-label">Trang phục Xuân Hè</div>
        </a>

        <!-- Trang phục Thu Đông -->
        <a class="tile" href="./user-category.html?category=Trang%20phục%20Thu%20Đông">
          <img src="../assets/images/2.png"
              alt="Trang phục Thu Đông - sắc vàng đỏ của lá mùa thu, ấm áp">
          <div class="tile-label">Trang phục Thu Đông</div>
        </a>

        <!-- Giày dép -->
        <a class="tile" href="./user-category.html?category=Giày%20dép">
          <img src="../assets/images/3.png"
              alt="Giày dép - thiết kế hiện đại, thể hiện cá tính và sự năng động">
          <div class="tile-label">Giày dép</div>
        </a>

        <!-- Phụ kiện -->
        <a class="tile" href="./user-category.html?category=Phụ%20kiện">
          <img src="../assets/images/4.png"
              alt="Phụ kiện - ví, kính râm và phụ kiện thời trang tinh tế">
          <div class="tile-label">Phụ kiện</div>
        </a>
</div>


    </section>

    <!-- PRODUCT PREVIEW (6 sp tĩnh) -->
    <section class="container section">
      <header class="section-head">
        <h2>Sản phẩm mới</h2>
        <a class="link" href="./search.html">Xem tất cả</a>
      </header>

      <div id="newProducts" class="product-grid"></div>

    </section>

    <!-- INFO STRIP -->
    <section class="info-strip">
      <div class="container strip-inner">
        <div class="strip-item">
          <strong>Miễn phí vận chuyển</strong>
          <span>Đơn từ 499k</span>
        </div>
        <div class="strip-item">
          <strong>Đổi trả dễ dàng</strong>
          <span>Trong 7 ngày</span>
        </div>
        <div class="strip-item">
          <strong>Thanh toán an toàn</strong>
          <span>COD / Ví điện tử</span>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <div>© 2025 Fashion Shop</div>
      <div class="links">
        <a href="#">Điều khoản</a>
        <a href="#">Bảo mật</a>
        <a href="#">Liên hệ</a>
      </div>
    </div>
  </footer>

<script>
(function(){
  var u = null;
  try { u = JSON.parse(localStorage.getItem('currentUser') || 'null'); } catch(e){}

  // Orders
  var linkOrders = document.querySelector('a.orders-link'); // <a class="orders-link" href="./user-orders.html">
  if (linkOrders && !u) linkOrders.href = './login.html?next=user-orders.html';

  // Cart
  var linkCart = document.querySelector('a[href$="cart.html"]');
  if (linkCart && !u) linkCart.href = './login.html?next=cart.html';
})();
</script>


</body>

<script>
(function(){
  const openBtn = document.getElementById('openSearch');
  const modal = document.getElementById('searchModal');
  const overlay = document.getElementById('searchOverlay');
  const closeBtn = document.getElementById('closeSearch');
  const form = document.getElementById('searchForm');

  function openModal(){
    modal.hidden = false; overlay.hidden = false;
    document.getElementById('sName').focus();
  }
  function closeModal(){
    modal.hidden = true; overlay.hidden = true;
  }

  openBtn?.addEventListener('click', openModal);
  closeBtn?.addEventListener('click', closeModal);
  overlay?.addEventListener('click', closeModal);
  document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeModal(); });

  // Đồng bộ radio -> hidden input
  const hiddenCat = document.getElementById('sCategory');
  document.querySelectorAll('.cat-radios input[name="cat"]').forEach(r=>{
    r.addEventListener('change', ()=>{
      hiddenCat.value = r.value;
    });
  });

  // Submit: gộp Tên + Loại + Khoảng giá trong 1 thao tác
  form?.addEventListener('submit', (e)=>{
    e.preventDefault();
    const q = document.getElementById('sName').value.trim();
    const category = document.getElementById('sCategory').value.trim();
    const min = document.getElementById('sMin').value.trim();
    const max = document.getElementById('sMax').value.trim();

    const params = new URLSearchParams();
    if(q) params.append('q', q);
    if(category) params.append('category', category);
    if(min) params.append('min', min);
    if(max) params.append('max', max);

    window.location.href = './search.html?' + params.toString();
  });

  // Dropdown "Danh mục" — hover giữ mở (desktop), click mở/đóng (mobile)
  const dd = document.querySelector('.nav-dd');
  const ddBtn = dd?.querySelector('.dd-trigger');
  const ddMenu = dd?.querySelector('.dd-menu');

  let closeTimeout;

  dd.addEventListener('mouseenter', () => {
    clearTimeout(closeTimeout);
    ddMenu.style.display = 'block';
    ddBtn.setAttribute('aria-expanded', 'true');
  });
  dd.addEventListener('mouseleave', () => {
    closeTimeout = setTimeout(() => {
      ddMenu.style.display = 'none';
      ddBtn.setAttribute('aria-expanded', 'false');
    }, 200);
  });

  // Click toggle (mobile)
  ddBtn?.addEventListener('click', (e) => {
    const isOpen = ddMenu.style.display === 'block';
    ddMenu.style.display = isOpen ? 'none' : 'block';
    ddBtn.setAttribute('aria-expanded', String(!isOpen));
    e.stopPropagation();
  });

  // Click ngoài để đóng
  document.addEventListener('click', (e) => {
    if (!dd.contains(e.target)) {
      ddMenu.style.display = 'none';
      ddBtn.setAttribute('aria-expanded', 'false');
    }
  });


})();
</script>

<script>
(function(){
  const user = JSON.parse(localStorage.getItem('currentUser') || 'null');

  // Hai nút trong hero
  const heroActions = document.querySelector('.hero-actions');

  // Nút tài khoản ở topbar
  const topAccount = document.querySelector('.account-login');

  if (user) {
    // 1) Ẩn 2 nút “Đăng ký / Đăng nhập” trong hero
    if (heroActions) heroActions.style.display = 'none';

    // 2) KHÔNG ẩn topbar nữa — đổi thành link Hồ sơ + tên ngắn
    if (topAccount) {
      const displayName = (user.name || 'Hồ sơ').trim().split(/\s+/).pop(); // lấy tên cuối
      topAccount.href = './profile.html';
      topAccount.style.display = ''; // đảm bảo đang hiện
      topAccount.innerHTML = `
        <span class="avatar" aria-hidden="true"></span>
        <span class="account-text">${displayName}</span>
      `;
    }
  }
})();
</script>



<script src="../js/auth-ui.js"></script>

<script id="products-data" type="application/json">
[
  { 
    "id": 1, 
    "name": "Đầm Nữ Sơ Mi Cotton Tay Ngắn Rút Dây Regular", 
    "category": "Trang phục Xuân Hè", 
    "price": 590000, 
    "img": "../assets/products/1.webp",
    "sizes": ["S","M","L","XL"], 
    "description": [
      "Chất liệu cotton thoáng mát, phom A-line tôn dáng. Phù hợp đi làm, dạo phố.",
      "Chất liệu: Cotton 100%",
      "Xuất xứ: Việt Nam",
      "Giặt máy chế độ nhẹ, không tẩy."
    ],
    "images": [
      "../assets/products/1.webp",
      "../assets/products/1.1.webp",
      "../assets/products/1.2.webp",
      "../assets/products/1.3.webp"
    ]
  },
  { 
    "id": 2, 
    "name": "Áo tanktop Slimme.Fitted", 
    "category": "Trang phục Xuân Hè", 
    "price": 160200, 
    "img": "../assets/products/2.webp" 
  },
  { 
    "id": 4, 
    "name": "Quần Denim Nữ Xanh Navy Rã Phối Form Balloon", 
    "category": "Trang phục Xuân Hè", 
    "price": 633000, 
    "img": "../assets/products/3.webp" 
  },
  { 
    "id": 3, 
    "name": "Áo Thun Tanktop Nam Sát Nách Cotton Form Loose", 
    "category": "Trang phục Xuân Hè", 
    "price": 373000, 
    "img": "../assets/products/4.webp" 
  },
  { 
    "id": 5, 
    "name": "Áo Thun Nam Tay Ngắn Thêu Chữ Trước Ngực Fitted", 
    "category": "Trang phục Xuân Hè", 
    "price": 343000, 
    "img": "../assets/products/5.webp" 
  },
  { 
    "id": 6, 
    "name": "Quần Short Nam Cotton Lưng Thun In Chữ Form Relax", 
    "category": "Trang phục Xuân Hè", 
    "price": 392000, 
    "img": "../assets/products/6.webp" 
  },
  { 
    "id": 7, 
    "name": "BE BOLD DERBY", 
    "category": "Giày dép", 
    "price": 2350000, 
    "img": "../assets/products/7.webp",
    "sizes": ["38","39","40","41","42","43","44","45"], 
    "description": [
      "Đại diện cho sự thoải mái và phóng khoáng, Be Bold Derby là ứng cử viên sáng giá cho các quý ông đang tìm kiếm một đôi giày có thể dễ dàng kết hợp với nhiều loại trang phục. Với sự kỳ công và tỉ mỉ trong thiết kế lẫn chất liệu, Fashion shop tin chắc rằng đôi giày Derby này sẽ giúp các quý ông nâng tầm phong cách cá nhân, đồng thời thể hiện cái tôi của bản thân."
    ],
    "images": [
      "../assets/products/7.webp",
      "../assets/products/7.1.webp",
      "../assets/products/7.2.webp",
      "../assets/products/7.3.webp"
    ]
  }, 
  { 
    "id": 8, 
    "name": "Giày Sandal Nữ MWC E196", 
    "category": "Giày dép", 
    "price": 195000, 
    "img": "../assets/products/8.jpg" 
  },
  { 
    "id": 9, 
    "name": "Giày Cao Gót MWC G266", 
    "category": "Giày dép", 
    "price": 235000, 
    "img": "../assets/products/9.jpg" 
  },
  { 
    "id": 10, 
    "name": "Giày Cao Gót Kiểu Dáng Basic Bít Mũi Bít Gót", 
    "category": "Giày dép", 
    "price": 237500, 
    "img": "../assets/products/10.jpg" 
  },
  { 
    "id": 11, 
    "name": "Giày Sneaker Nam Form Giày Cá Tính, Phối Màu Hiện Đại, Streetwear Chuẩn Chất", 
    "category": "Giày dép", 
    "price": 39500, 
    "img": "../assets/products/11.jpg" 
  },
  { 
    "id": 12, 
    "name": "Dép Sục Nam Quai Liền Khối Bản Rộng Phối Khoá Kim Loại", 
    "category": "Giày dép", 
    "price": 34500, 
    "img": "../assets/products/12.jpg" 
  },
  { 
    "id": 13, 
    "name": "Áo dệt kim tay dài nam. Loose", 
    "category": "Trang phục Thu Đông", 
    "price": 687000, 
    "img": "../assets/products/13.webp",
    "sizes": ["S","M","L","XL"], 
    "description": [
      "Áo len cổ tròn đỏ - lựa chọn lý tưởng cho nam giới yêu thích phong cách tối giản nhưng nổi bật. Màu đỏ rực rỡ kết hợp cùng phụ kiện tối màu giúp tôn lên sự tự tin và cá tính.",
      "Chất liệu: Len cao cấp, mềm mịn, giữ ấm tốt",
      "Màu sắc: Đỏ đô",
      "Kiểu dáng: Cổ tròn, tay dài, form regular"
    ],
    "images": [
      "../assets/products/13.webp",
      "../assets/products/13.1.webp",
      "../assets/products/13.2.webp",
      "../assets/products/13.3.webp"
    ]
  },
  { 
    "id": 14, 
    "name": "Áo gile phao nam đen", 
    "category": "Trang phục Thu Đông", 
    "price": 999000, 
    "img": "../assets/products/14.webp" 
  },
  { 
    "id": 15, 
    "name": "Bộ nỉ basic unisex", 
    "category": "Trang phục Thu Đông", 
    "price": 765000, 
    "img": "../assets/products/15.webp" 
  },
  { 
    "id": 16, 
    "name": "Áo len dệt kim nữ trắng viền đen", 
    "category": "Trang phục Thu Đông", 
    "price": 455000, 
    "img": "../assets/products/16.webp" 
  },
  { 
    "id": 17, 
    "name": "Áo ôm cổ cao nữ màu xám nhạt", 
    "category": "Trang phục Thu Đông", 
    "price": 473000, 
    "img": "../assets/products/17.webp" 
  },
  { 
    "id": 18, 
    "name": "Áo len nữ đen viền trắng basic", 
    "category": "Trang phục Thu Đông", 
    "price": 788000, 
    "img": "../assets/products/18.webp" 
  },
  { 
    "id": 19, 
    "name": "Mặt dây chuyền Bán Nguyệt Ánh Lam", 
    "category": "Phụ kiện", 
    "price": 3910000, 
    "img": "../assets/products/19.png",
    "sizes": ["30","31","32","33"], 
    "description": [
      "Lấy cảm hứng từ ánh trăng dịu dàng, Mặt dây chuyền Bán Nguyệt Ánh Lam được chế tác từ bạc cao cấp với phần mặt trăng ánh lam óng ánh. Thiết kế đơn giản mà tinh tế, tượng trưng cho sự nữ tính và bí ẩn.",
      "Chất liệu: Bạc 925 phủ bóng.",
      "Màu sắc: Ánh bạc kết hợp lam nhẹ.",
      "Kiểu dáng: Hình bán nguyệt.",
      "Phù hợp với: Vòng tay, dây chuyền hoặc charm mix nhiều kiểu."
    ],
    "images": [
      "../assets/products/19.png",
      "../assets/products/19.1.png",
      "../assets/products/19.2.png",
      "../assets/products/19.3.png"
    ]
  },
  { 
    "id": 20, 
    "name": "Ba lô thời trang unisex MWC hai tông xám", 
    "category": "Phụ kiện", 
    "price": 622000, 
    "img": "../assets/products/20.jpg" 
  },
  { 
    "id": 21, 
    "name": "Scrunchie ren hoa vintage nơ đỏ", 
    "category": "Phụ kiện", 
    "price": 177000, 
    "img": "../assets/products/21.jpeg" 
  },
  { 
    "id": 22, 
    "name": "Bịt tai lông siêu mềm Moji trắng sữa", 
    "category": "Phụ kiện", 
    "price": 245000, 
    "img": "../assets/products/22.jpeg" 
  },
  { 
    "id": 23, 
    "name": "Găng tay len hồng nơ xanh dễ thương", 
    "category": "Phụ kiện", 
    "price": 215000, 
    "img": "../assets/products/23.jpeg" 
  },
  { 
    "id": 24, 
    "name": "Mũ tai thỏ lông mềm nơ trắng", 
    "category": "Phụ kiện", 
    "price": 399000, 
    "img": "../assets/products/24.jpeg" 
  }
]
</script>

<script>
(function(){
  const grid = document.getElementById('newProducts');
  if (!grid) return;

  const fmtVND = n => (n || 0).toLocaleString('vi-VN') + 'đ';

  function handleAddToCart(prod){
    try {
      const user = JSON.parse(localStorage.getItem('currentUser') || 'null');
      if (!user) { window.location.href = './login.html?next=cart.html'; return; }
      const cart = JSON.parse(localStorage.getItem('cart') || '[]');
      const found = cart.find(it => it.id === prod.id);
      if (found) found.qty = (found.qty || 1) + 1;
      else cart.push({ id: prod.id, name: prod.name, price: prod.price, img: prod.img, qty: 1 });
      localStorage.setItem('cart', JSON.stringify(cart));
    } catch(e){ console.error(e); }
  }

  function loadEmbeddedProducts(){
    const el = document.getElementById('products-data');
    if (!el || !el.textContent || !el.textContent.trim) return [];
    const txt = el.textContent.trim();
    if (!txt) return [];
    try {
      const json = JSON.parse(txt);
      return Array.isArray(json) ? json : [];
    } catch(err){
      console.error('Không parse được products-data', err);
      return [];
    }
  }

  const items = loadEmbeddedProducts();
  if (!items.length){
    grid.innerHTML = '<p>Không có sản phẩm để hiển thị.</p>';
    return;
  }

  const newest = [...items].sort((a,b) => (b.id||0) - (a.id||0)).slice(0,6);

  grid.innerHTML = newest.map(p => `
    <article class="card">
      <div class="thumb">
        <a href="./product-detail.html?id=${encodeURIComponent(p.id)}" aria-label="${p.name}">
          <img src="${p.img || 'https://picsum.photos/seed/fallback/600/450'}" alt="${p.name}">
        </a>
      </div>
      <div class="info">
        <div class="name">
          <a href="./product-detail.html?id=${encodeURIComponent(p.id)}">${p.name}</a>
        </div>
        <div class="price"><b>${fmtVND(p.price)}</b></div>
        <div class="actions">
          <button class="btn-add" data-id="${p.id}">Thêm giỏ</button>
        </div>
      </div>
    </article>
  `).join('');

  grid.querySelectorAll('.btn-add').forEach(btn => {
    btn.addEventListener('click', () => {
      const id = Number(btn.dataset.id);
      const prod = newest.find(x => x.id === id);
      if (prod) handleAddToCart(prod);
    });
  });
})();
</script>

</script>


</html>
