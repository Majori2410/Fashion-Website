<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin • Tồn kho</title>

  <!-- Fonts như các trang khác -->
  <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;600;700&display=swap" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap&subset=vietnamese" rel="stylesheet"/>

  <!-- CSS chung -->
  <link rel="stylesheet" href="../css/admin.css">
  <!-- CSS riêng -->
  <link rel="stylesheet" href="../css/inventory.css">
</head>
<body>
  <div class="wrap">
    <!-- ========== SIDEBAR ========== -->
    <aside class="sidebar">
      <div class="brand"><span class="dot"></span><span class="txt">Fashion Admin</span></div>
        <nav class="menu">
        <a href="dashboard.html" data-nav="dashboard">
            <span class="ico">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="3" width="7" height="7" rx="1.5"/><rect x="14" y="3" width="7" height="7" rx="1.5"/>
                <rect x="3" y="14" width="7" height="7" rx="1.5"/><rect x="14" y="14" width="7" height="7" rx="1.5"/>
            </svg>
            </span><span class="txt">Tổng quan</span>
        </a>

        <a href="users.html" data-nav="users">
            <span class="ico">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                <path d="M16 21v-2a4 4 0 0 0-4-4H7a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="3"/>
                <path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a3 3 0 0 1 0 5.74"/>
            </svg>
            </span><span class="txt">Người dùng</span>
        </a>

        <a href="categories.html" data-nav="categories">
            <span class="ico">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20.59 13.41 11 3H4v7l9.59 9.59a2 2 0 0 0 2.82 0l4.18-4.18a2 2 0 0 0 0-2.82z"/><circle cx="7.5" cy="7.5" r="1.5"/>
            </svg>
            </span><span class="txt">Loại sản phẩm</span>
        </a>

        <a href="receipts.html" data-nav="receipts">
            <span class="ico">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 3v14"/><path d="M19 10l-7 7-7-7"/>
            </svg>
            </span><span class="txt">Nhập kho</span>
        </a>

        <a href="pricelist.html" data-nav="pricelist">
            <span class="ico">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 1v22"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7H14a3.5 3.5 0 0 1 0 7H6"/>
            </svg>
            </span><span class="txt">Bảng giá</span>
        </a>

        <a href="orders.html" data-nav="orders">
            <span class="ico">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                <path d="M4 2h14a2 2 0 0 1 2 2v16l-3-2-3 2-3-2-3 2-3-2-1 0V4a2 2 0 0 1 2-2z"/>
                <path d="M8 7h8M8 11h8M8 15h5"/>
            </svg>
            </span><span class="txt">Đơn hàng</span>
        </a>

        <a href="inventory.html" data-nav="inventory" class="active">
            <span class="ico">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 16V8a2 2 0 0 0-1-1.73L13 2.27a2 2 0 0 0-2 0L4 6.27A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4a2 2 0 0 0 1-1.73z"/>
                <path d="M3.3 7L12 12l8.7-5"/><path d="M12 22V12"/>
            </svg>
            </span><span class="txt">Tồn kho</span>
        </a>

        <a href="products.html">
          <span class="ico">
            <!-- icon túi mua hàng -->
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
              <path d="M6 7l1-3h10l1 3"></path>
              <path d="M6 7h12l-1 13H7L6 7z"></path>
              <path d="M9 10a3 3 0 0 0 6 0"></path>
            </svg>
          </span><span class="txt">Sản phẩm</span>
        </a>
        </nav>

      <div class="sidebar-footer">Fashion Admin • v1.0</div>
    </aside>

    <!-- ========== MAIN ========== -->
    <main>
    <div class="topbar">
      <div class="title">TỒN KHO</div>
      <div class="top-actions">
        <div class="avatar">
          <img data-admin-avatar src="https://i.pravatar.cc/100?img=13" alt="Nguyễn Admin">
        </div>
        <div class="account">
          <div class="name" data-admin-name>Nguyễn Admin</div>
          <div class="role">Quản trị viên</div>
        </div>
        <button class="btn-logout" data-admin-logout title="Đăng xuất">Đăng xuất</button>
      </div>
    </div>

      <div class="container grid">
        <!-- Tabs -->
        <div class="card tabs">
          <button class="tab-btn active" data-tab="byCategory">Theo loại sản phẩm</button>
          <button class="tab-btn" data-tab="byProduct">Theo sản phẩm</button>
        </div>

        <!-- Bộ lọc cho tab Theo sản phẩm -->
        <div class="card toolbar" id="productToolbar" hidden>
          <div class="filters">
            <div class="search-box">
              <input id="qSearch" type="search" placeholder="Tìm theo tên sản phẩm..." autocomplete="off">
              <button id="btnClear" class="clear" title="Xoá">✕</button>
            </div>
            <div class="range">
              <label>Từ ngày</label><input id="fromDate" type="date">
              <label>Đến ngày</label><input id="toDate" type="date">
            </div>
            <div class="state">
              <label>Tình trạng</label>
              <select id="statusFilter">
                <option value="all">Tất cả</option>
                <option value="low">Sắp hết hàng</option>
                <option value="oos">Hết hàng</option>
              </select>
            </div>
            <button id="btnApply" class="btn btn-primary">Áp dụng</button>
          </div>
        </div>

        <!-- Nội dung tab Theo loại -->
        <div class="card" id="tab-byCategory">
          <div class="cat-grid" id="catGrid"></div>
          <div class="cat-detail" id="catDetail" hidden>
            <div class="cat-header">
              <button class="btn btn-ghost" id="btnBackCats">← Danh sách loại</button>
              <h3 id="catTitle"></h3>
            </div>
            <div class="prod-cards" id="catProducts"></div>
          </div>
        </div>

        <!-- Nội dung tab Theo sản phẩm -->
        <div class="card" id="tab-byProduct" hidden>
          <h3 style="margin:0 0 10px">Tất cả sản phẩm</h3>
          <div class="table-wrap">
            <table class="inventory">
              <thead>
              <tr>
                <th style="width:54px">Ảnh</th>
                <th>Tên sản phẩm</th>
                <th style="width:140px; text-align:right">Nhập</th>
                <th style="width:140px; text-align:right">Xuất</th>
                <th style="width:140px; text-align:right">Tồn</th>
              </tr>
              </thead>
              <tbody id="invTbody">
              <tr><td colspan="5" class="muted">Đang tải dữ liệu…</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast" role="status" aria-live="polite" aria-atomic="true"></div>

    <!-- DỮ LIỆU NHÚNG TRỰC TIẾP CHO TỒN KHO -->
  <script id="products-data" type="application/json">
  [
    { 
      "id": 1, 
      "name": "Đầm Nữ Sơ Mi Cotton Tay Ngắn Rút Dây Regular", 
      "category": "Trang phục Xuân Hè", 
      "price": 590000, 
      "img": "../assets/products/1.webp",
      "sizes": ["S","M","L","XL"], 
      "description": [
        "Chất liệu cotton thoáng mát, phom A-line tôn dáng. Phù hợp đi làm, dạo phố.",
        "Chất liệu: Cotton 100%",
        "Xuất xứ: Việt Nam",
        "Giặt máy chế độ nhẹ, không tẩy."
      ],
      "images": [
        "../assets/products/1.webp",
        "../assets/products/1.1.webp",
        "../assets/products/1.2.webp",
        "../assets/products/1.3.webp"
      ]
    },
    { 
      "id": 2, 
      "name": "Áo tanktop Slimme.Fitted", 
      "category": "Trang phục Xuân Hè", 
      "price": 160200, 
      "img": "../assets/products/2.webp" 
    },
    { 
      "id": 4, 
      "name": "Quần Denim Nữ Xanh Navy Rã Phối Form Balloon", 
      "category": "Trang phục Xuân Hè", 
      "price": 633000, 
      "img": "../assets/products/3.webp" 
    },
    { 
      "id": 3, 
      "name": "Áo Thun Tanktop Nam Sát Nách Cotton Form Loose", 
      "category": "Trang phục Xuân Hè", 
      "price": 373000, 
      "img": "../assets/products/4.webp" 
    },
    { 
      "id": 5, 
      "name": "Áo Thun Nam Tay Ngắn Thêu Chữ Trước Ngực Fitted", 
      "category": "Trang phục Xuân Hè", 
      "price": 343000, 
      "img": "../assets/products/5.webp" 
    },
    { 
      "id": 6, 
      "name": "Quần Short Nam Cotton Lưng Thun In Chữ Form Relax", 
      "category": "Trang phục Xuân Hè", 
      "price": 392000, 
      "img": "../assets/products/6.webp" 
    },
    { 
      "id": 7, 
      "name": "BE BOLD DERBY", 
      "category": "Giày dép", 
      "price": 2350000, 
      "img": "../assets/products/7.webp",
      "sizes": ["38","39","40","41","42","43","44","45"], 
      "description": [
        "Đại diện cho sự thoải mái và phóng khoáng, Be Bold Derby là ứng cử viên sáng giá cho các quý ông đang tìm kiếm một đôi giày có thể dễ dàng kết hợp với nhiều loại trang phục. Với sự kỳ công và tỉ mỉ trong thiết kế lẫn chất liệu, Fashion shop tin chắc rằng đôi giày Derby này sẽ giúp các quý ông nâng tầm phong cách cá nhân, đồng thời thể hiện cái tôi của bản thân."
      ],
      "images": [
        "../assets/products/7.webp",
        "../assets/products/7.1.webp",
        "../assets/products/7.2.webp",
        "../assets/products/7.3.webp"
      ]
    }, 
    { 
      "id": 8, 
      "name": "Giày Sandal Nữ MWC E196", 
      "category": "Giày dép", 
      "price": 195000, 
      "img": "../assets/products/8.jpg" 
    },
    { 
      "id": 9, 
      "name": "Giày Cao Gót MWC G266", 
      "category": "Giày dép", 
      "price": 235000, 
      "img": "../assets/products/9.jpg" 
    },
    { 
      "id": 10, 
      "name": "Giày Cao Gót Kiểu Dáng Basic Bít Mũi Bít Gót", 
      "category": "Giày dép", 
      "price": 237500, 
      "img": "../assets/products/10.jpg" 
    },
    { 
      "id": 11, 
      "name": "Giày Sneaker Nam Form Giày Cá Tính, Phối Màu Hiện Đại, Streetwear Chuẩn Chất", 
      "category": "Giày dép", 
      "price": 39500, 
      "img": "../assets/products/11.jpg" 
    },
    { 
      "id": 12, 
      "name": "Dép Sục Nam Quai Liền Khối Bản Rộng Phối Khoá Kim Loại", 
      "category": "Giày dép", 
      "price": 34500, 
      "img": "../assets/products/12.jpg" 
    },
    { 
      "id": 13, 
      "name": "Áo dệt kim tay dài nam. Loose", 
      "category": "Trang phục Thu Đông", 
      "price": 687000, 
      "img": "../assets/products/13.webp",
      "sizes": ["S","M","L","XL"], 
      "description": [
        "Áo len cổ tròn đỏ - lựa chọn lý tưởng cho nam giới yêu thích phong cách tối giản nhưng nổi bật. Màu đỏ rực rỡ kết hợp cùng phụ kiện tối màu giúp tôn lên sự tự tin và cá tính.",
        "Chất liệu: Len cao cấp, mềm mịn, giữ ấm tốt",
        "Màu sắc: Đỏ đô",
        "Kiểu dáng: Cổ tròn, tay dài, form regular"
      ],
      "images": [
        "../assets/products/13.webp",
        "../assets/products/13.1.webp",
        "../assets/products/13.2.webp",
        "../assets/products/13.3.webp"
      ]
    },
    { 
      "id": 14, 
      "name": "Áo gile phao nam đen", 
      "category": "Trang phục Thu Đông", 
      "price": 999000, 
      "img": "../assets/products/14.webp" 
    },
    { 
      "id": 15, 
      "name": "Bộ nỉ basic unisex", 
      "category": "Trang phục Thu Đông", 
      "price": 765000, 
      "img": "../assets/products/15.webp" 
    },
    { 
      "id": 16, 
      "name": "Áo len dệt kim nữ trắng viền đen", 
      "category": "Trang phục Thu Đông", 
      "price": 455000, 
      "img": "../assets/products/16.webp" 
    },
    { 
      "id": 17, 
      "name": "Áo ôm cổ cao nữ màu xám nhạt", 
      "category": "Trang phục Thu Đông", 
      "price": 473000, 
      "img": "../assets/products/17.webp" 
    },
    { 
      "id": 18, 
      "name": "Áo len nữ đen viền trắng basic", 
      "category": "Trang phục Thu Đông", 
      "price": 788000, 
      "img": "../assets/products/18.webp" 
    },
    { 
      "id": 19, 
      "name": "Mặt dây chuyền Bán Nguyệt Ánh Lam", 
      "category": "Phụ kiện", 
      "price": 3910000, 
      "img": "../assets/products/19.png",
      "sizes": ["30","31","32","33"], 
      "description": [
        "Lấy cảm hứng từ ánh trăng dịu dàng, Mặt dây chuyền Bán Nguyệt Ánh Lam được chế tác từ bạc cao cấp với phần mặt trăng ánh lam óng ánh. Thiết kế đơn giản mà tinh tế, tượng trưng cho sự nữ tính và bí ẩn.",
        "Chất liệu: Bạc 925 phủ bóng.",
        "Màu sắc: Ánh bạc kết hợp lam nhẹ.",
        "Kiểu dáng: Hình bán nguyệt.",
        "Phù hợp với: Vòng tay, dây chuyền hoặc charm mix nhiều kiểu."
      ],
      "images": [
        "../assets/products/19.png",
        "../assets/products/19.1.png",
        "../assets/products/19.2.png",
        "../assets/products/19.3.png"
      ]
    },
    { 
      "id": 20, 
      "name": "Ba lô thời trang unisex MWC hai tông xám", 
      "category": "Phụ kiện", 
      "price": 622000, 
      "img": "../assets/products/20.jpg" 
    },
    { 
      "id": 21, 
      "name": "Scrunchie ren hoa vintage nơ đỏ", 
      "category": "Phụ kiện", 
      "price": 177000, 
      "img": "../assets/products/21.jpeg" 
    },
    { 
      "id": 22, 
      "name": "Bịt tai lông siêu mềm Moji trắng sữa", 
      "category": "Phụ kiện", 
      "price": 245000, 
      "img": "../assets/products/22.jpeg" 
    },
    { 
      "id": 23, 
      "name": "Găng tay len hồng nơ xanh dễ thương", 
      "category": "Phụ kiện", 
      "price": 215000, 
      "img": "../assets/products/23.jpeg" 
    },
    { 
      "id": 24, 
      "name": "Mũ tai thỏ lông mềm nơ trắng", 
      "category": "Phụ kiện", 
      "price": 399000, 
      "img": "../assets/products/24.jpeg" 
    }
  ]
  </script>

  <script id="receipts-data" type="application/json">
[
  {
    "id": "RCP-202511-001",
    "date": "2025-11-01",
    "status": "completed",
    "items": [
      { "productId": 1, "importPrice": 420000, "qty": 12 },
      { "productId": 2, "importPrice": 120000, "qty": 18 },
      { "productId": 3, "importPrice": 250000, "qty": 10 },
      { "productId": 4, "importPrice": 400000, "qty": 9 },
      { "productId": 5, "importPrice": 230000, "qty": 15 },
      { "productId": 6, "importPrice": 210000, "qty": 20 },
      { "productId": 7, "importPrice": 900000, "qty": 6 },
      { "productId": 8, "importPrice": 150000, "qty": 14 }
    ]
  },
  {
    "id": "RCP-202511-002",
    "date": "2025-11-05",
    "status": "completed",
    "items": [
      { "productId": 9,  "importPrice": 150000, "qty": 8 },
      { "productId": 10, "importPrice": 160000, "qty": 12 },
      { "productId": 11, "importPrice": 130000, "qty": 16 },
      { "productId": 12, "importPrice": 120000, "qty": 10 },
      { "productId": 13, "importPrice": 480000, "qty": 7 },
      { "productId": 14, "importPrice": 600000, "qty": 9 },
      { "productId": 15, "importPrice": 520000, "qty": 11 },
      { "productId": 16, "importPrice": 300000, "qty": 13 }
    ]
  },
  {
    "id": "RCP-202511-003",
    "date": "2025-11-10",
    "status": "processing",
    "items": [
      { "productId": 17, "importPrice": 280000,  "qty": 10 },
      { "productId": 18, "importPrice": 500000,  "qty": 14 },
      { "productId": 19, "importPrice": 2100000, "qty": 5 },
      { "productId": 20, "importPrice": 350000,  "qty": 8 },
      { "productId": 21, "importPrice": 90000,   "qty": 12 },
      { "productId": 22, "importPrice": 150000,  "qty": 9 },
      { "productId": 23, "importPrice": 80000,   "qty": 7 },
      { "productId": 24, "importPrice": 200000,  "qty": 6 }
    ]
  }
]
</script>


  <script id="inventory-data" type="application/json">
{
  "openingStock": {
    "1": 10,
    "2": 8,
    "3": 6,
    "4": 5,
    "5": 12,
    "6": 7,
    "7": 4,
    "8": 9,
    "9": 6,
    "10": 5,
    "11": 8,
    "12": 7,
    "13": 5,
    "14": 6,
    "15": 8,
    "16": 9,
    "17": 4,
    "18": 6,
    "19": 3,
    "20": 5,
    "21": 7,
    "22": 4,
    "23": 5,
    "24": 6
  },
  "outMovements": [
    { "productId": 1,  "date": "2025-11-12", "qty": 5 },
    { "productId": 2,  "date": "2025-11-12", "qty": 7 },
    { "productId": 3,  "date": "2025-11-12", "qty": 4 },
    { "productId": 4,  "date": "2025-11-12", "qty": 3 },
    { "productId": 5,  "date": "2025-11-12", "qty": 8 },
    { "productId": 6,  "date": "2025-11-12", "qty": 6 },
    { "productId": 7,  "date": "2025-11-12", "qty": 3 },
    { "productId": 8,  "date": "2025-11-12", "qty": 7 },

    { "productId": 9,  "date": "2025-11-13", "qty": 4 },
    { "productId": 10, "date": "2025-11-13", "qty": 5 },
    { "productId": 11, "date": "2025-11-13", "qty": 6 },
    { "productId": 12, "date": "2025-11-13", "qty": 4 },
    { "productId": 13, "date": "2025-11-13", "qty": 3 },
    { "productId": 14, "date": "2025-11-13", "qty": 4 },
    { "productId": 15, "date": "2025-11-13", "qty": 5 },
    { "productId": 16, "date": "2025-11-13", "qty": 6 },

    { "productId": 17, "date": "2025-11-14", "qty": 3 },
    { "productId": 18, "date": "2025-11-14", "qty": 5 },
    { "productId": 19, "date": "2025-11-14", "qty": 2 },
    { "productId": 20, "date": "2025-11-14", "qty": 4 },
    { "productId": 21, "date": "2025-11-14", "qty": 5 },
    { "productId": 22, "date": "2025-11-14", "qty": 3 },
    { "productId": 23, "date": "2025-11-14", "qty": 4 },
    { "productId": 24, "date": "2025-11-14", "qty": 3 }
  ]
}
</script>


  <script src="../js/inventory.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const link = document.querySelector('[data-nav="inventory"]');
      if (link) link.classList.add('active');
    });
  </script>
</body>

<script src="../js/admin-session.js" defer></script>

</html>
